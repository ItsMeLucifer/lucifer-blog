(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{120:function(e,t,n){},198:function(e,t,n){},202:function(e,t,n){},343:function(e,t,n){"use strict";n.r(t);var a,s=n(0),i=n.n(s),o=n(17),r=n.n(o),c=(n(198),n(7)),l=n(8),p=n(9),u=n(11),d=n(12),j=n(19),h=n(23),m=n(18),b=(n(202),n(1)),O=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"form-group",children:["input"===this.props.elementName?Object(b.jsx)("input",{className:"form-control",id:this.props.name,type:this.props.type,placeholder:this.props.placeHolder,required:"required","data-validation-required-message":"Please enter your name.",name:this.props.name,onChange:this.props.onChange,onBlur:this.props.handleBlur}):Object(b.jsx)("textarea",{className:"form-control",id:this.props.name,placeholder:this.props.placeHolder,required:"required","data-validation-required-message":"Please enter a message.",name:this.props.name,onChange:this.props.onChange,onBlur:this.props.handleBlur}),Object(b.jsx)("p",{className:"help-block text-danger",children:this.props.errors&&Object(b.jsx)("span",{children:this.props.errors})})]})}}]),n}(s.Component),f=n(13),g=n(20),x=n(26),v=n.n(x);a="";var y={makeFileURL:function(e,t){return a+e+"?access_token="+t},login:function(e,t,n){v.a.post("".concat(a,"/api/users/login"),{email:e,password:t}).then((function(e){n(e)}))},register:function(e,t,n,s){v.a.post("".concat(a,"/api/users"),{name:e,email:t,password:n}).then((function(e){s(e)})).catch((function(e){s(e)}))},adminRegister:function(e,t,n,s,i){v.a.post("".concat(a,"/api/users?access_token=").concat(s),{name:e,email:t,password:n}).then((function(e){i(e)})).catch((function(e){i(e)}))},getUser:function(e,t,n){v.a.get("".concat(a,"/api/users/").concat(e,"?access_token=").concat(t),{params:{filter:{include:"Profile"}}}).then((function(e){n(e)}))},getUsers:function(e,t){v.a.get("".concat(a,"/api/users?access_token=").concat(e)).then((function(e){t(e)}))},updateUser:function(e,t,n){v.a.patch("".concat(a,"/api/Users/").concat(e.id,"?access_token=").concat(t),e).then((function(e){n(e)}))},getPosts:function(e,t){v.a.get("".concat(a,"/api/Posts?access_token=").concat(e)).then((function(e){t(e)}))},getSitePosts:function(e,t){v.a.get("".concat(a,"/api/Posts"),{params:{filter:{skip:e,limit:6,include:"PostImage",fields:{id:!0,title:!0,slug:!0,content:!1}}}}).then((function(e){t(e)}))},getPostCount:function(e){v.a.get("".concat(a,"/api/Posts/count")).then((function(t){e(t)}))},addPost:function(e,t,n){v.a.post("".concat(a,"/api/Posts?access_token=").concat(t),e).then((function(e){n(e)}))},getSinglePost:function(e,t,n){v.a.get("".concat(a,"/api/Posts/").concat(e,"?access_token=").concat(t),{params:{filter:{include:"PostImage"}}}).then((function(e){n(e)}))},updatePost:function(e,t,n){v.a.patch("".concat(a,"/api/Posts/").concat(e.id,"?access_token=").concat(t),e).then((function(e){n(e)}))},uploadImage:function(e,t,n,s,i){v.a.post("".concat(a,"/api/PostImages/upload?post_id=").concat(n,"&access_token=").concat(t,"&user_id=").concat(s),e).then((function(e){i(e)}))},getPostBySlug:function(e,t,n){v.a.get("".concat(a,"/api/Posts/findOne?access_token=").concat(t),{params:{filter:{where:{slug:e},include:{Comments:"Profile"}}}}).then((function(e){n(e)}))},postComment:function(e,t,n){v.a.post("".concat(a,"/api/Comments?access_token=").concat(t),e,{params:{filter:{include:"Profile"}}}).then((function(e){n(e)}))},getCommentById:function(e,t,n){v.a.get("".concat(a,"/api/Comments/").concat(e,"?access_token=").concat(t),{params:{filter:{include:"Profile"}}}).then((function(e){n(e)}))},deleteComment:function(e,t,n){v.a.delete("".concat(a,"/api/Comments/").concat(e,"?access_token=").concat(t)).then((function(e){n(e)}))},getComments:function(e,t){v.a.get("".concat(a,"/api/Comments?access_token=").concat(e)).then((function(e){t(e)}))}},N=function(e,t){return function(n){y.login(e,t,(function(t){n({type:"LOGIN",payload:{email:e,token:t.data.id,userId:t.data.userId}}),y.getUser(t.data.userId,t.data.id,(function(e){n({type:"AFTER_LOGIN",payload:e.data})}))}))}},P=[{name:"email",elementName:"input",type:"email",placeHolder:"Your email"},{name:"password",elementName:"input",type:"password",placeHolder:"Your password"}],S=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(b.jsx)("div",{className:"login-page",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"login-form",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("h1",{children:"Login"})}),Object(b.jsx)("div",{children:Object(b.jsxs)("form",{className:"row",onSubmit:function(t){t.preventDefault(),e.props.login(e.props.values.email,e.props.values.password)},children:[P.map((function(t,n){return Object(b.jsx)("div",{className:"col-md-12",children:Object(b.jsx)(O,Object(c.a)(Object(c.a)({},t),{},{value:e.props.values[t.name],name:t.name,onChange:e.props.handleChange,onBlur:e.props.handleBlur,touched:e.props.touched[t.name],errors:e.props.errors[t.name]}))},n)})),Object(b.jsx)("div",{className:"col-md-12",children:Object(b.jsx)("button",{className:"btn btn-primary",children:"Login"})})]})})]})})})}}]),n}(s.Component),w=Object(m.b)((function(e){return{auth:e.auth}}),(function(e){return{login:function(t,n){e(N(t,n))}}}))(Object(f.d)({mapPropsToValues:function(){return{email:"",password:""}},validationSchema:g.a().shape({email:g.b().email("Email is invalid").required("You need to login with your email address"),password:g.b().required("You need to enter your password")}),handleSubmit:function(e,t,n){t.setSubmitting;console.log("Loggin attempt",e)}})(S)),k=(n(92),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(b.jsx)("header",{className:"masthead",style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(".concat(this.props.image,")"),backgroundPosition:"center",backgroundSize:"cover",display:"fex",alignItems:"center"},children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"intro-text",children:[Object(b.jsx)("div",{className:"intro-lead-in",children:this.props.title}),Object(b.jsx)("div",{className:"intro-heading text-uppercase outline",children:this.props.subtitle}),this.props.showButton&&Object(b.jsx)(j.b,{className:"btn btn-primary btn-xl text-uppercase js-scroll-trigger",to:this.props.link,children:this.props.buttonText})]})})})}}]),n}(s.Component)),C=n.p+"static/media/about.8ee16d94.jpg",T=n(171),_=n.n(T),D=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"col-md-4 col-sm-6 portfolio-item",children:[Object(b.jsxs)(j.b,{className:"portfolio-link",to:"/blog/".concat(this.props.post.slug),onClick:function(t){return e.props.setPostData(e.props.post)},children:[Object(b.jsx)("div",{className:"portfolio-hover",children:Object(b.jsx)("div",{className:"portfolio-hover-content blog-item",children:Object(b.jsx)(_.a,{className:"blog-item-icon"})})}),this.props.post.PostImage&&this.props.post.PostImage.length>0?Object(b.jsx)("img",{style:{width:"100%"},className:"img-fluid",src:y.makeFileURL(this.props.post.PostImage[0].thumbnail,null),alt:""}):null]}),Object(b.jsxs)("div",{className:"portfolio-caption",children:[Object(b.jsx)("h4",{children:this.props.post.title}),Object(b.jsx)("p",{className:"text-muted",children:this.props.post.slug?this.props.post.slug.length>20?this.props.post.slug.substring(0,18)+"...":this.props.post.slug:null})]})]})}}]),n}(s.Component),I=Object(m.b)((function(e){return{}}),(function(e){return{setPostData:function(t){e(function(e){return function(t){t({type:"SET_DEFAULT_POST_DATA",payload:e})}}(t))}}}))(D),E=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.getPosts(0),this.props.getPostCount()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{children:[Object(b.jsx)(k,{title:"Blog",subtitle:"Read all of our stories",link:"/services",showButton:!1,image:C,classes:"outline"}),Object(b.jsx)("button",{className:"blog-login-button",onClick:function(t){e.props.history.push("/login")},children:"Sign in"}),Object(b.jsx)("button",{className:"blog-register-button",onClick:function(t){e.props.history.push("/signup")},children:"Sign up"}),Object(b.jsx)("section",{className:"bg-light",id:"portfolio",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("div",{className:"row",children:this.props.site.posts&&this.props.site.posts.length>0?this.props.site.posts.map((function(e,t){return Object(b.jsx)(I,{post:e},t)})):null}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-md-12",children:Object(b.jsx)("div",{className:"text-center",children:this.props.site.postCount>this.props.site.posts.length?Object(b.jsx)("button",{className:"btn btn-default",onClick:function(t){e.props.getPosts(e.props.site.posts.length)},children:"Load More"}):null})})})]})})]})}}]),n}(s.Component),U=Object(h.f)(Object(m.b)((function(e){return{site:e.site}}),(function(e){return{getPosts:function(t){e(function(e){return function(t){y.getSitePosts(e,(function(n){t({type:"GOT_SITE_POSTS",payload:n.data,skip:e})}))}}(t))},getPostCount:function(){e((function(e){y.getPostCount((function(t){e({type:"GOT_POST_COUNT",payload:t.data.count})}))}))}}}))(E)),A=[{name:"content",elementName:"input",type:"text",placeHolder:"Your Comment"}],L=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={postId:e.props.site.post.id,profileId:e.props.auth.profile.id,userId:e.props.auth.user.id,content:e.props.values.content,createdAt:"".concat((new Date).toLocaleDateString()," ").concat((new Date).getHours(),":").concat((new Date).getMinutes())};e.props.postComment(n,e.props.auth.token)},children:[Object(b.jsx)(O,Object(c.a)(Object(c.a)({},A[0]),{},{value:this.props.values[A[0].name],name:A[0].name,onChange:this.props.handleChange,onBlur:this.props.handleBlur,touched:this.props.touched[A[0].name],errors:this.props.errors[A[0].name]})),Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})}}]),n}(s.Component),M=Object(m.b)((function(e){return{auth:e.auth,site:e.site}}),(function(e){return{postComment:function(t,n){e(function(e,t){return function(n){y.postComment(e,t,(function(e){200===e.status&&y.getCommentById(e.data.id,t,(function(e){n({type:"ADDED_COMMENT",payload:e.data})}))}))}}(t,n))}}}))(Object(f.d)({mapPropsToValues:function(){return{content:""}},validationSchema:g.a().shape({content:g.b().required("Your comment needs to have text")}),handleSubmit:function(e,t,n){t.setSubmitting}})(L)),B=n(387),G=n(345),R=n(172),q=n.n(R),F=n.p+"static/media/user.8d49e377.png",H=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.getSinglePost(this.props.match.params.slug,this.props.auth.token)}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"blogPost",children:[Object(b.jsx)(k,{title:"",subtitle:this.props.site.post.title,link:"/services",showButton:!1,image:this.props.site.post.PostImage&&this.props.site.post.PostImage.length>0?y.makeFileURL(this.props.site.post.PostImage[0].url,this.props.auth.token):""}),Object(b.jsxs)("div",{className:"container content",children:[Object(b.jsx)("div",{className:"row content",children:Object(b.jsxs)("div",{className:"col-md-9",children:[Object(b.jsxs)("div",{className:"date-text-row",children:[Object(b.jsxs)("div",{className:"date-text",children:["Created: ",this.props.site.post.createdAt," "]}),Object(b.jsx)("div",{className:"date-text",children:this.props.site.post.modified?"Modified: "+this.props.site.post.modified:""})]}),Object(b.jsx)("li",{className:"divider",children:Object(b.jsx)(B.a,{})}),Object(b.jsx)("div",{className:"post-content",dangerouslySetInnerHTML:{__html:this.props.site.post.content}})]})}),Object(b.jsxs)(G.a,{className:"row comment-section",children:[Object(b.jsxs)("div",{className:"col-md-12 comment-builder",children:[Object(b.jsx)("h3",{children:"Comments"}),this.props.auth.token?Object(b.jsx)(M,{}):Object(b.jsxs)("p",{children:["Want to comment? ",Object(b.jsx)(j.b,{to:"/signup",children:"Sign Up!"})]})]}),Object(b.jsx)("div",{className:"row comment",children:this.props.site.post.Comments?this.props.site.post.Comments.length>0?this.props.site.post.Comments.map((function(t,n){return Object(b.jsxs)(G.a,{className:"comment-row",children:[Object(b.jsxs)("div",{className:"start",children:[Object(b.jsx)("img",{className:"user-icon",src:F}),Object(b.jsxs)("div",{className:"comment-column",children:[Object(b.jsx)("h5",{children:t.Profile?null==t.Profile.name?"Unknown":t.Profile.name:""}),Object(b.jsx)("p",{children:t.content})]})]}),Object(b.jsxs)("div",{className:"end",children:[Object(b.jsx)("div",{className:"comment-date",children:t.createdAt}),e.props.auth.user.id===t.userId?Object(b.jsx)(q.a,{onClick:function(n){e.props.deleteComment(t.id,e.props.site.post.slug,e.props.auth.token)},className:"comment-icon"}):Object(b.jsx)("div",{className:"empty-icon"})]})]},n)})):null:"There is no Comments"})]})]})]})}}]),n}(s.Component),W=Object(m.b)((function(e){return{auth:e.auth,site:e.site}}),(function(e){return{getSinglePost:function(t,n){e(function(e,t){return function(n){y.getPostBySlug(e,t,(function(e){n({type:"SET_FULL_POST_DATA",payload:e.data})}))}}(t,n))},deleteComment:function(t,n,a){e(function(e,t,n){return function(t){y.deleteComment(e,n,(function(n){t({type:"DELETED_COMMENT",payload:e})}))}}(t,0,a))}}}))(H),Y=[{name:"email",elementName:"input",type:"email",placeHolder:"Your email"},{name:"name",elementName:"input",type:"text",placeHolder:"Your name"},{name:"password",elementName:"input",type:"password",placeHolder:"Your password"},{name:"password2",elementName:"input",type:"password",placeHolder:"Your password (again)"}],V=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(b.jsx)("div",{className:"login-page",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"login-form",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("h1",{children:"Sign up"})}),Object(b.jsx)("div",{children:Object(b.jsxs)("form",{className:"row",onSubmit:function(t){t.preventDefault(),e.props.register(e.props.values.name,e.props.values.email,e.props.values.password)},children:[Y.map((function(t,n){return Object(b.jsx)("div",{className:"col-md-12",children:Object(b.jsx)(O,Object(c.a)(Object(c.a)({},t),{},{value:e.props.values[t.name],name:t.name,onChange:e.props.handleChange,onBlur:e.props.handleBlur,touched:e.props.touched[t.name],errors:e.props.errors[t.name]}))},n)})),Object(b.jsxs)("div",{className:"login-page-row",children:[Object(b.jsxs)("div",{className:"login-page-button",children:[Object(b.jsx)("p",{className:"text-danger text-center",children:this.props.auth.error||""}),Object(b.jsx)("button",{className:"btn btn-primary",children:"Sign up!"})]}),Object(b.jsxs)("div",{className:"login-page-text",children:["Already have an account? ",Object(b.jsx)(j.b,{to:"/login",children:"Log in!"})]})]})]})})]})})})}}]),n}(s.Component),z=Object(m.b)((function(e){return{auth:e.auth}}),(function(e){return{register:function(t,n,a){e(function(e,t,n){return function(a){y.register(e,t,n,(function(e){200===e.status?a(N(t,n)):e&&a({type:"SHOW_ERROR",payload:"There is an error. Do you already have an account?"})}))}}(t,n,a))}}}))(Object(f.d)({mapPropsToValues:function(){return{email:"",name:"",password:"",password2:""}},validationSchema:g.a().shape({email:g.b().email("Email is invalid").required("You need to login with your email address"),name:g.b().required("We need your name"),password:g.b().min(8,"Passwords need to be at least 8 characters long").required("You need to enter your password"),password2:g.b().required("You need to enter your password again").test("pass-match","Passwords don't match",(function(e){return this.parent.password===e}))}),handleSubmit:function(e,t,n){t.setSubmitting;console.log("Loggin attempt",e)}})(V)),J=function(e){return function(t){y.getUsers(e,(function(e){t({type:"GOT_USERS",payload:e.data})}))}},X=function(e){return function(t){y.getPosts(e,(function(e){t({type:"GOT_POSTS",payload:e.data})}))}},K=(n(120),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.getPosts(this.props.auth.token),this.props.getUsers(this.props.auth.token),this.props.getComments(this.props.auth.token)}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"p100",children:[Object(b.jsx)("div",{className:"admin-title",children:"Dashboard"}),Object(b.jsx)(B.a,{}),Object(b.jsxs)("div",{className:"dashboard-main-row",children:[Object(b.jsxs)("div",{className:"admin-row",children:[Object(b.jsxs)(G.a,{className:"admin-tale",children:[Object(b.jsx)("div",{className:"dashboard-counter",children:this.props.admin.users?this.props.admin.users.length:null}),"Users"]}),Object(b.jsxs)(G.a,{className:"admin-tale",children:[Object(b.jsx)("div",{className:"dashboard-counter",children:this.props.admin.posts?this.props.admin.posts.length:null}),"Posts"]}),Object(b.jsxs)(G.a,{className:"admin-tale",children:[Object(b.jsx)("div",{className:"dashboard-counter",children:this.props.admin.comments?this.props.admin.comments.length:null}),"Comments"]})]}),Object(b.jsxs)(G.a,{className:"admin-user-menu",children:[Object(b.jsx)("img",{className:"avatar",src:F}),Object(b.jsx)("div",{className:"text-1",children:this.props.auth.user.name}),Object(b.jsx)("li",{className:"admin-divider",children:Object(b.jsx)(B.a,{})}),Object(b.jsx)("div",{className:"text-3",children:"admin"===this.props.auth.user.Profile.role?"Administrator":"editor"===this.props.auth.user.Profile.role?"Editor":"subscriber"===this.props.auth.user.Profile.role?"Subscriber":""}),Object(b.jsx)("li",{className:"admin-divider",children:Object(b.jsx)(B.a,{})}),Object(b.jsxs)("div",{className:"text-2",children:["Email: ",this.props.auth.user.email]}),Object(b.jsxs)("div",{className:"text-2",children:["Since: ",this.props.auth.user.Profile&&this.props.auth.user.Profile.created_at?this.props.auth.user.Profile.created_at.toString().substring(0,this.props.auth.user.Profile.created_at.toString().length-14):null]})]})]})]})}}]),n}(s.Component)),Q=Object(m.b)((function(e){return{auth:e.auth,admin:e.admin}}),(function(e){return{getUsers:function(t){e(J(t))},getPosts:function(t){e(X(t))},getComments:function(t){e(function(e){return function(t){y.getComments(e,(function(e){t({type:"GOT_COMMENTS",payload:e.data})}))}}(t))}}}))(Object(h.f)(K)),Z=n(388),ee=n(392),te=n(389),ne=n(390),ae=n(391),se=n(393),ie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.rows,a=t.columns;return Object(b.jsx)(G.a,{children:Object(b.jsxs)(Z.a,{children:[Object(b.jsx)(te.a,{children:Object(b.jsx)(ne.a,{children:a?a.map((function(e,t){return Object(b.jsx)(ae.a,{children:e.label},t)})):null})}),Object(b.jsx)(ee.a,{children:n?n.map((function(t,n){return Object(b.jsx)(ne.a,{children:a.map((function(n,a){return Object(b.jsx)(ae.a,{children:"id"===n.name?"/admin/posts"==e.props.path?Object(b.jsx)(se.a,{component:j.b,to:"/admin/posts/edit/".concat(t[n.name]),children:t[n.name]}):Object(b.jsx)(se.a,{component:j.b,to:"/admin/users/edit/".concat(t[n.name]),children:t[n.name]}):t[n.name]},a)}))},n)})):null})]})})}}]),n}(s.Component),oe=n(394),re=n(102),ce=n.n(re),le=n(6),pe=[{label:"ID",name:"id"},{label:"Email",name:"email"},{label:"Name",name:"name"}],ue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.classes,t=this.props.admin.users;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Users"}),Object(b.jsx)(ie,{columns:pe,rows:t,path:"/admin/users"}),Object(b.jsx)(oe.a,{component:j.b,to:"/admin/users/add",color:"secondary","aria-label":"Add",className:e.fab,children:Object(b.jsx)(ce.a,{})})]})}}]),n}(s.Component),de=Object(m.b)((function(e){return{auth:e.auth,admin:e.admin}}),(function(e){return{getUsers:function(t){e(J(t))}}}))(Object(le.a)((function(e){return{fab:{position:"fixed",bottom:"50px",right:"50px"}}}))(ue)),je=[{label:"ID",name:"id"},{label:"Title",name:"title"}],he=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.admin.posts,t=this.props.classes;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Posts"}),Object(b.jsx)(ie,{columns:je,rows:e,path:"/admin/posts"}),Object(b.jsx)(oe.a,{component:j.b,to:"/admin/posts/add",color:"secondary","aria-label":"Add",className:t.fab,children:Object(b.jsx)(ce.a,{})})]})}}]),n}(s.Component),me=Object(m.b)((function(e){return{auth:e.auth,admin:e.admin}}),(function(e){return{getPosts:function(t){e(X(t))}}}))(Object(le.a)((function(e){return{fab:{position:"fixed",bottom:"50px",right:"50px"}}}))(he)),be=n(52),Oe=n(398),fe=n(104),ge=n.n(fe),xe=n(174),ve=n.n(xe),ye=n(173),Ne=n.n(ye),Pe=(n(340),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).uploadImage=function(t){var n=new FormData;n.append("file",t.target.files[0],(new Date).getTime().toString()+t.target.files[0].name),e.props.uploadImage(n,e.props.auth.token,e.props.admin.post.id,e.props.auth.user.userId)},e.modules={toolbar:[["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{size:["small","medium","large","huge"]}],[{color:[]},{background:[]}],["image"],["clean"]]},e.formats=["header","bold","italic","underline","strike","blockquote","script","list","bullet","indent","link","image","color","code-block"],e}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;if("add"===this.props.match.params.view&&this.props.admin.posts.filter((function(e){return e.title===n.props.values.title})).length>0){var a=this.props.admin.posts.filter((function(e){return e.title===n.props.values.title}))[0];this.props.history.push("/admin/posts/edit/"+a.dispatch)}this.props.admin.post.id!==e.admin.post.id&&this.props.setValues(this.props.admin.post)}},{key:"componentDidMount",value:function(e,t){"edit"===this.props.match.params.view&&this.props.match.params.id&&this.props.getSinglePost(this.props.match.params.id,this.props.auth.token)}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(b.jsx)("div",{children:Object(b.jsxs)(f.b,{className:t.container,children:[Object(b.jsxs)(G.a,{className:t.leftSide,children:[Object(b.jsx)(be.b,{name:"title",label:"Title",margin:"normal",onChange:function(t){return e.props.setFieldValue("slug",t.target.value.toLowerCase().replace(/ /g,"_"))},fullWidth:!0}),Object(b.jsx)(be.b,{name:"slug",label:"Slug",margin:"normal"}),Object(b.jsx)(Ne.a,{value:this.props.values.content,modules:this.modules,formats:this.formats,placeHolder:"Write some cool stuff",onChange:function(t){return e.props.setFieldValue("content",t)}})]}),Object(b.jsxs)(G.a,{className:t.rightSide,children:[Object(b.jsx)(be.a,{name:"status",label:"Status",margin:"normal",options:[{label:"Unpublished",value:!1},{label:"Published",value:!0}],fullWidth:!0}),Object(b.jsx)("div",{className:t.save,children:Object(b.jsxs)(Oe.a,{variant:"contained",color:"secondary",onClick:function(t){e.props.handleSubmit()},children:[Object(b.jsx)(ge.a,{})," Save"]})}),this.props.admin.post.PostImage&&this.props.admin.post.PostImage.length>0?Object(b.jsx)("img",{src:y.makeFileURL(this.props.admin.post.PostImage[0].url,this.props.auth.token),className:t.postImage}):null,Object(b.jsxs)("div",{children:[Object(b.jsxs)(Oe.a,{variant:"contained",color:"primary",onClick:function(e){$(".MyFile").trigger("click")},children:[Object(b.jsx)(ve.a,{}),"Upload Post Image"]}),Object(b.jsx)("input",{type:"file",style:{display:"none"},className:"MyFile",onChange:this.uploadImage})]})]})]})})}}]),n}(s.Component)),Se=Object(h.f)(Object(m.b)((function(e){return{auth:e.auth,admin:e.admin}}),(function(e){return{addPost:function(t,n){e(function(e,t){return function(n){y.addPost(e,t,(function(e){n({type:"POST_ADDED",payload:e.data})}))}}(t,n))},updatePost:function(t,n){e(function(e,t){return function(n){y.updatePost(e,t,(function(e){n({type:"UPDATED_POST",payload:e.data})}))}}(t,n))},getSinglePost:function(t,n){e(function(e,t){return function(n){y.getSinglePost(e,t,(function(e){n({type:"GOT_SINGLE_POST",payload:e.data})}))}}(t,n))},uploadImage:function(t,n,a,s){e(function(e,t,n,a){return function(s){y.uploadImage(e,t,n,a,(function(e){s({type:"UPLOADED_IMAGE",payload:e.data})}))}}(t,n,a,s))}}}))(Object(f.d)({mapPropsToValues:function(e){return{title:e.admin.post.title||"",slug:e.admin.post.slug||"",createdAt:e.admin.post.createdAt||(new Date).toLocaleDateString(),status:e.admin.post.status||!1,content:e.admin.post.content||"",modified:e.admin.post.modified||(new Date).toLocaleDateString()}},validationSchema:g.a().shape({title:g.b().required("Title is required"),slug:g.b().required(),content:g.b().required()}),handleSubmit:function(e,t){t.setSubmitting;var n=t.props;if("edit"===n.match.params.view){var a=Object(c.a)(Object(c.a)({},e),{},{id:n.match.params.id,modified:(new Date).toLocaleDateString()});n.updatePost(a,n.auth.token)}else n.addPost(e,n.auth.token);h.a}})(Object(le.a)((function(e){return{container:{margin:e.spacing(3),display:"flex",flexDirection:"row wrap",width:"100%"},formControl:{margin:e.spacing(0)},leftSide:{flex:2,height:"100%",margin:e.spacing(1),padding:e.spacing(3)},rightSide:{flex:1,height:"100%",margin:e.spacing(1),padding:e.spacing(3)},save:{marginBottom:e.spacing(2)},postImage:{width:"100%"}}}))(Pe)))),we=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;if("add"===this.props.match.params.view&&this.props.admin.users.filter((function(e){return e.name===n.props.values.name})).length>0){var a=this.props.admin.users.filter((function(e){return e.name===n.props.values.name}))[0];this.props.history.push("/admin/users/edit/"+a.dispatch)}this.props.admin.user&&this.props.admin.user.id!==e.admin.user.id&&this.props.setValues(this.props.admin.user)}},{key:"componentDidMount",value:function(e,t){"edit"===this.props.match.params.view&&this.props.match.params.id&&this.props.getSingleUser(this.props.match.params.id,this.props.auth.token)}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(b.jsxs)(f.b,{className:t.container,children:[Object(b.jsxs)(G.a,{className:t.leftSide,children:[Object(b.jsx)(be.b,{name:"name",label:"Name",margin:"normal",fullWidth:!0}),Object(b.jsx)(be.b,{name:"email",label:"Email",margin:"normal",fullWidth:!0}),Object(b.jsx)(be.b,{name:"password",label:"Password",margin:"normal",type:"password",fullWidth:!0}),Object(b.jsx)(be.a,{name:"role",label:"Role",margin:"normal",options:[{label:"Admin",value:0},{label:"Subscriber",value:1},{label:"Editor",value:2}],className:t.halfWidth})]}),Object(b.jsx)(G.a,{className:t.rightSide,children:Object(b.jsx)("div",{className:t.save,children:Object(b.jsxs)(Oe.a,{variant:"contained",color:"secondary",onClick:function(t){e.props.handleSubmit(),h.a},children:[Object(b.jsx)(ge.a,{})," Save"]})})})]})}}]),n}(s.Component),ke=Object(h.f)(Object(m.b)((function(e){return{admin:e.admin,auth:e.auth}}),(function(e){return{adminRegister:function(t,n){e(function(e,t){return function(n){y.adminRegister(e.name,e.email,e.password,t,(function(e){200===e.status&&n({type:"ADMIN_REGISTER",payload:e.data})}))}}(t,n))},updateUser:function(t,n){e(function(e,t){return function(n){y.updateUser(e,t,(function(e){n({type:"UPDATED_POST",payload:e.data})}))}}(t,n))},getSingleUser:function(t,n){e(function(e,t){return function(n){y.getUser(e,t,(function(e){n({type:"GOT_SINGLE_USER",payload:e.data})}))}}(t,n))}}}))(Object(f.d)({mapPropsToValues:function(e){return{name:e.admin.user&&e.admin.user.name||"",email:e.admin.user&&e.admin.user.email||"",password:"",role:1}},validationSchema:g.a().shape({name:g.b().required("Title is required"),email:g.b().email().required("Email is required"),password:g.b().required("Password is required")}),handleSubmit:function(e,t){t.setSubmitting;var n=t.props;if(console.log(n.auth.token),"edit"===n.match.params.view){var a=Object(c.a)(Object(c.a)({},e),{},{id:n.match.params.id});n.updateUser(a,n.auth.token)}else n.adminRegister(e,n.auth.token)}})(Object(le.a)((function(e){return{container:{margin:e.spacing(3),display:"flex",flexDirection:"row wrap",width:"100%"},formControl:{margin:e.spacing(0)},leftSide:{flex:2,height:"100%",margin:e.spacing(1),padding:e.spacing(3)},rightSide:{flex:1,height:"100%",margin:e.spacing(1),padding:e.spacing(3)},save:{marginBottom:e.spacing(2)},postImage:{width:"100%"},halfWidth:{width:"50%"}}}))(we)))),Ce=n(401),Te=n(402),_e=n(79),De=n(29),Ie=n.n(De),Ee=n(396),Ue=n(397),Ae=n(399),Le=n(400),Me=n(177),Be=n.n(Me),Ge=n(175),Re=n.n(Ge),qe=n(176),Fe=n.n(qe);function He(e){return Object(b.jsx)(Ue.a,Object(c.a)({button:!0,component:j.b},e))}var We=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(b.jsxs)(Ee.a,{children:[Object(b.jsxs)(He,{to:"/admin",children:[Object(b.jsx)(Ae.a,{children:Object(b.jsx)(Re.a,{})}),Object(b.jsx)(Le.a,{primary:"Dashboard"})]}),Object(b.jsxs)(He,{to:"/admin/posts",children:[Object(b.jsx)(Ae.a,{children:Object(b.jsx)(Fe.a,{})}),Object(b.jsx)(Le.a,{primary:"Posts"})]}),Object(b.jsxs)(He,{to:"/admin/users",children:[Object(b.jsx)(Ae.a,{children:Object(b.jsx)(Be.a,{})}),Object(b.jsx)(Le.a,{primary:"Users"})]})]})}}]),n}(s.Component),Ye=n(404),Ve=n(395),ze=n(178),Je=n.n(ze),Xe=n(179),$e=n.n(Xe),Ke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={open:!1},e.handleDrawerOpen=function(t){e.setState({open:!0})},e.handleDrawerClose=function(t){e.setState({open:!1})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(b.jsxs)("div",{id:"admin-page",className:e.root,children:[Object(b.jsx)(Ce.a,{className:Ie()(e.appBar,this.state.open&&e.appBarShift),children:Object(b.jsxs)(Te.a,{className:e.toolbar,children:[Object(b.jsx)(Ve.a,{onClick:this.handleDrawerOpen,children:Object(b.jsx)(Je.a,{})}),Object(b.jsx)(_e.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,children:"Admin"})]})}),Object(b.jsxs)(Ye.a,{classes:{paper:Ie()(e.drawerPaper,!this.state.open&&e.drawerPaperClose)},variant:"permanent",open:!0,children:[Object(b.jsx)("div",{className:e.toolbarIcon,children:Object(b.jsx)(Ve.a,{onClick:this.handleDrawerClose,children:Object(b.jsx)($e.a,{})})}),Object(b.jsx)(B.a,{}),Object(b.jsx)(We,{})]}),Object(b.jsxs)("main",{className:e.content,children:[Object(b.jsx)("div",{className:e.appBarSpace}),this.props.children]})]})}}]),n}(s.Component),Qe=Object(le.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaper:{position:"relative",whiteSpace:"noWrap",overflowX:"hidden",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",width:e.spacing(7),transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},toolbarIcon:Object(c.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,padding:3*e.spacing.units,height:"100vh",overflow:"auto"},appBarSpace:e.mixins.toolbar}}))(Ke),Ze=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{id:"admin-page",children:this.props.children})}}]),n}(s.Component),et=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(b.jsxs)(j.a,{children:[Object(b.jsx)(h.b,{exact:!0,path:"/admin/users/:view/:id",render:function(t){return Object(b.jsx)("div",{children:e.props.auth.token?e.props.auth.user.Profile?"admin"===e.props.auth.user.Profile.role?Object(b.jsx)(Qe,{children:Object(b.jsx)(ke,{})}):Object(b.jsx)(h.a,{to:"/"}):null:Object(b.jsx)(Ze,{children:Object(b.jsx)(w,{})})})}}),Object(b.jsx)(h.b,{exact:!0,path:"/admin/users/:view",render:function(t){return Object(b.jsx)("div",{children:e.props.auth.token?e.props.auth.user.Profile?"admin"===e.props.auth.user.Profile.role?Object(b.jsx)(Qe,{children:Object(b.jsx)(ke,{})}):Object(b.jsx)(h.a,{to:"/"}):null:Object(b.jsx)(Ze,{children:Object(b.jsx)(w,{})})})}}),Object(b.jsx)(h.b,{exact:!0,path:"/admin/users",render:function(t){return Object(b.jsx)("div",{children:e.props.auth.token?e.props.auth.user.Profile?"admin"===e.props.auth.user.Profile.role?Object(b.jsx)(Qe,{children:Object(b.jsx)(de,{})}):Object(b.jsx)(h.a,{to:"/"}):null:Object(b.jsx)(Ze,{children:Object(b.jsx)(w,{})})})}}),Object(b.jsx)(h.b,{exact:!0,path:"/admin/posts/:view/:id",render:function(t){return Object(b.jsx)("div",{children:e.props.auth.token?e.props.auth.user.Profile?"admin"===e.props.auth.user.Profile.role?Object(b.jsx)(Qe,{children:Object(b.jsx)(Se,{})}):Object(b.jsx)(h.a,{to:"/"}):null:Object(b.jsx)(Ze,{children:Object(b.jsx)(w,{})})})}}),Object(b.jsx)(h.b,{exact:!0,path:"/admin/posts/:view",render:function(t){return Object(b.jsx)("div",{children:e.props.auth.token?e.props.auth.user.Profile?"admin"===e.props.auth.user.Profile.role?Object(b.jsx)(Qe,{children:Object(b.jsx)(Se,{})}):Object(b.jsx)(h.a,{to:"/"}):null:Object(b.jsx)(Ze,{children:Object(b.jsx)(w,{})})})}}),Object(b.jsx)(h.b,{exact:!0,path:"/admin/posts",render:function(t){return Object(b.jsx)("div",{children:e.props.auth.token?e.props.auth.user.Profile?"admin"===e.props.auth.user.Profile.role?Object(b.jsx)(Qe,{children:Object(b.jsx)(me,{})}):Object(b.jsx)(h.a,{to:"/"}):null:Object(b.jsx)(Ze,{children:Object(b.jsx)(w,{})})})}}),Object(b.jsx)(h.b,{exact:!0,path:"/signup",render:function(t){return e.props.auth.token?Object(b.jsx)(h.a,{to:"/"}):Object(b.jsx)(Ze,{children:Object(b.jsx)(z,{})})}}),Object(b.jsx)(h.b,{exact:!0,path:"/admin",render:function(t){return Object(b.jsx)("div",{children:e.props.auth.token?e.props.auth.user.Profile?"admin"===e.props.auth.user.Profile.role?Object(b.jsx)(Qe,{children:Object(b.jsx)(Q,{})}):Object(b.jsx)(h.a,{to:"/"}):null:Object(b.jsx)(Ze,{children:Object(b.jsx)(w,{})})})}}),Object(b.jsx)(h.b,{exact:!0,path:"/login",render:function(t){return Object(b.jsx)("div",{children:e.props.auth.token?Object(b.jsx)(h.a,{to:"/"}):Object(b.jsx)(Ze,{children:Object(b.jsx)(w,{})})})}}),Object(b.jsx)(h.b,{exact:!0,path:"/",render:function(e){return Object(b.jsx)(h.a,{to:"/blog"})}}),Object(b.jsx)(h.b,{exact:!0,path:"/blog/:slug",render:function(e){return Object(b.jsx)(W,Object(c.a)({},e))}}),Object(b.jsx)(h.b,{exact:!0,path:"/blog",render:function(e){return Object(b.jsx)(U,Object(c.a)({},e))}})]})}}]),n}(s.Component),tt=Object(m.b)((function(e){return{auth:e.auth}}),(function(e){return{}}))(et),nt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,406)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),i(e),o(e)}))},at=n(38),st=n(180),it=n(125),ot=n(181),rt=n.n(ot),ct={user:{},token:null,error:null,profile:null},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(c.a)(Object(c.a)({},e),{},{user:t.payload,token:t.payload.token});case"SHOW_ERROR":return Object(c.a)(Object(c.a)({},e),{},{error:t.payload});case"AFTER_LOGIN":return Object(c.a)(Object(c.a)({},e),{},{user:t.payload,profile:t.payload.Profile});default:return e}},pt={users:[],posts:[],post:{},user:{},comments:[]},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GOT_USERS":return Object(c.a)(Object(c.a)({},e),{},{users:t.payload});case"GOT_POSTS":return Object(c.a)(Object(c.a)({},e),{},{posts:t.payload});case"POST_ADDED":return Object(c.a)(Object(c.a)({},e),{},{posts:e.posts.concat(t.payload),post:t.payload});case"GOT_SINGLE_POST":return Object(c.a)(Object(c.a)({},e),{},{post:t.payload});case"UPDATED_POST":return Object(c.a)(Object(c.a)({},e),{},{post:Object(c.a)(Object(c.a)({},e.post),t.payload),posts:e.posts.map((function(e){return e.id===t.payload.id?Object(c.a)(Object(c.a)({},e),t.payload):e}))});case"UPLOADED_IMAGE":return Object(c.a)(Object(c.a)({},e),{},{post:Object(c.a)(Object(c.a)({},e.post),{},{PostImage:[t.payload]})});case"ADMIN_REGISTER":return Object(c.a)(Object(c.a)({},e),{},{users:e.users.concat(t.payload),user:t.payload});case"GOT_SINGLE_USER":return Object(c.a)(Object(c.a)({},e),{},{user:t.payload});case"GOT_COMMENTS":return Object(c.a)(Object(c.a)({},e),{},{comments:t.payload});default:return e}},dt={posts:[],postCount:0,post:{}},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GOT_SITE_POSTS":return Object(c.a)(Object(c.a)({},e),{},{posts:t.skip?e.posts.concat(t.payload):t.payload});case"GOT_POST_COUNT":return Object(c.a)(Object(c.a)({},e),{},{postCount:t.payload});case"SET_DEFAULT_POST_DATA":return Object(c.a)(Object(c.a)({},e),{},{post:t.payload});case"SET_FULL_POST_DATA":return Object(c.a)(Object(c.a)({},e),{},{post:Object(c.a)(Object(c.a)({},e.post),t.payload)});case"ADDED_COMMENT":return Object(c.a)(Object(c.a)({},e),{},{post:Object(c.a)(Object(c.a)({},e.post),{},{Comments:e.post.Comments.concat(t.payload)})});case"DELETED_COMMENT":return Object(c.a)(Object(c.a)({},e),{},{post:Object(c.a)(Object(c.a)({},e.post),{},{Comments:e.post.Comments.filter((function(e){return e.id!=t.payload}))})});default:return e}},ht=Object(at.c)({auth:lt,admin:ut,site:jt}),mt={key:"root",storage:rt.a},bt=Object(it.a)(mt,ht),Ot=n(182),ft=function(){var e=Object(at.d)(bt,Object(at.a)(st.a));return{store:e,persistor:Object(it.b)(e)}}(),gt=ft.store,xt=ft.persistor;r.a.render(Object(b.jsx)(m.a,{store:gt,children:Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(Ot.a,{loading:null,persistor:xt,children:Object(b.jsx)(tt,{})})})}),document.getElementById("root")),nt()},92:function(e,t,n){}},[[343,1,2]]]);
//# sourceMappingURL=main.7d98bd43.chunk.js.map